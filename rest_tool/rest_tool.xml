<tool id="rest_tool" name="Fetch Data from pubchem" version="0.1.0">
    <description>Fetch pubchem data</description>
    <version_command>echo "0.1.0"</version_command>
    <requirements>
        <requirement type="set_environment">REST_TOOL_SCRIPT_PATH</requirement>
    </requirements>
    <command interpreter="python">
        #if $choose_action.action == 'specific_data':
        rest_tool.py
            #if $choose_action.field_or_file1.field_or_file1 == 'field':
            --id $choose_action.field_or_file1.id1 
            #else:
            --idfile $choose_action.field_or_file1.file_ids_1
            #end if
            --type $choose_action.input_type 
            
            --operation $choose_action.operation_property.operation
            #if $choose_action.operation_property.operation == 'property':
                --property-value $choose_action.operation_property.property
            #end if
            
            --outfile $output
        #elif $choose_action.action == 'compounds_for_assay':
            rest_tool_comp_for_assay.py
            #if $choose_action.field_or_file2.field_or_file2 == 'field':
            --aid $choose_action.field_or_file2.id2 
            #else:
            --aidfile $choose_action.field_or_file2.file_ids_2
            #end if
            --outfile $output
        #elif $choose_action.action == 'assays_by_activity':
            rest_tool_assay_by_activity_or_target.py --activity $choose_action.activity --outfile $output
        #elif $choose_action.action == 'assays_by_targets':
            rest_tool_assay_by_activity_or_target.py --targettype $choose_action.target_identifier_type --targetid $choose_action.target_id --outfile $output
        #end if
    </command>

    <inputs>
        <conditional name="choose_action">
            <param name="action" multiple="false" type="select" label="Choose action">
                <option value="specific_data">Get Data for specific Assay/Compound/Substance</option>
                <option value="compounds_for_assay">Get all compound IDs to given BioAssays</option>
                <option value="all_assay_with_compounds">Get all BioAssay IDs with Compound IDs</option>
                <option value="assays_by_activity">Get BioAssays for activity</option>
                <option value="assays_by_targets">Get BioAssays for targets</option>
            </param>
            <when value="specific_data">
                <param name="input_type" multiple="false" type="select" label="Input Type">
                    <option value="assay">BioAssay</option>
                    <option value="compound">Compound</option>
                    <option value="substance">Substance</option>
                </param>
                <conditional name="field_or_file1">
                    <param name="field_or_file1" multiple="false" type="select" label="Specify the ID by">
                        <option value="field">Textfield</option>
                        <option value="file">File</option>
                    </param>
                    <when value="field">
                        <param format="txt" name="id1" type="text" label="Enter the ID(s)" />
                    </when>
                    <when value="file">
                        <param format="txt,csv" name="file_ids_1" type="data" label="Give the file" />
                    </when>
                </conditional>
                
                <conditional name="operation_property">
                    <param name="operation" type="select" multiple="false" label="Operation">
                    <option value="synonyms">Synonyms</option>
                    <option value="cids">CIDs</option>
                    <option value="property">Property</option>
                    <option value="xrefs">XRefs</option>
                    <option value="description">Discription</option>
                    <option value="summary">Summary</option>
                    </param>
                    <when value="property">
                        <param name="property" label="Specify Property" type="text" />
                    </when>
                </conditional>

            </when>
            <when value="compounds_for_assay">
                <conditional name="field_or_file2">
                    <param name="field_or_file2" multiple="false" type="select" label="Specify the ID by">
                        <option value="field">Textfield</option>
                        <option value="file">File</option>
                    </param>
                    <when value="field">
                        <param format="txt" name="id2" type="text" label="Enter the ID(s)" />
                    </when>
                    <when value="file">
                        <param format="txt,csv" name="file_ids_2" type="data" label="Give the file" />
                    </when>
                </conditional>
            </when>
            <when value="assays_by_activity">
                <param format="txt" name="activity" type="text" label="Enter the activity " />
            </when>
            <when value="assays_by_targets">
                <param name="target_identifier_type" multiple="false" type="select" label="Choose target identifier">
                    <option value="gi">GI</option>
                    <option value="geneid">Gene ID</option>
                    <option value="genesymbol">Gene Symbol</option>
                </param>
                <param format="txt" name="target_id" type="text" label="Enter the target" />
            </when>
            
        </conditional>
    </inputs>
    <outputs>
        <data format="csv" name="output" />
    </outputs>
    <tests>
    </tests>
    <help>
**What it does**

This tool fetches data from pubchem
    </help>
</tool>
