<tool id="rest_tool" name="Fetch Data from pubchem" version="0.1.0">
    <description>Fetch pubchem data</description>
    <version_command>echo "0.1.0"</version_command>
    <requirements>
        <requirement type="set_environment">REST_TOOL_SCRIPT_PATH</requirement>
    </requirements>
    <command interpreter="python">
        #if $choose_action.action == 'specific_data':
        rest_tool.py 
            --id $choose_action.id 
            --type $choose_action.input_type 
            --outformat $choose_action.output_format 
            
            --operation $choose_action.operation_property.operation
            #if $choose_action.operation_property.operation == 'property':
                --property-value $choose_action.operation_property.property
            #end if
            
            --outfile $output
        #elif $choose_action.action == 'compounds_for_assay':
            rest_tool_comp_for_assay.py --aid $choose_action.aid --outfile $output
        #end if
    </command>

    <inputs>
        <conditional name="choose_action">
            <param name="action" multiple="false" type="select" label="Choose action">
                <option value="specific_data">Get Data for specific Assay/Compound/Substance</option>
                <option value="compounds_for_assay">Get all compound IDs to given BioAssays</option>
                <option value="all_assay_with_compounds">Get BioAssay IDs with Compound IDs</option>
            </param>
            <when value="specific_data">
                <param name="input_type" multiple="false" type="select" label="Input Type">
                    <option value="assay">BioAssay</option>
                    <option value="compound">Compound</option>
                    <option value="substance">Substance</option>
                </param>
                <param format="txt" name="id" type="text" label="Specify the ID" />
                <conditional name="operation_property">
                    <param name="operation" type="select" multiple="false" label="Operation">
                    <option value="synonyms">Synonyms</option>
                    <option value="cids">CIDs</option>
                    <option value="property">Property</option>
                    <option value="xrefs">XRefs</option>
                    <option value="description">Discription</option>
                    <option value="summary">Summary</option>
                    </param>
                    <when value="property">
                        <param name="property" label="Specify Property" type="text" />
                    </when>
                </conditional>
                <param name="output_format" type="select" label="Output Format">
                <option value="tsv">tsv</option>
                <option value="csv">csv</option>
                <option value="txt">txt</option>
                <option value="png">png</option>
                <option value="json">json</option>
                <option value="xml">xml</option>
                </param>
            </when>
            <when value="compounds_for_assay">
                <param format="txt" name="aid" type="text" label="Specify the ID of BioAssay" />
            </when>
        
        </conditional>
    </inputs>
    <outputs>
        <data format="csv" name="output">
            <change_format>
                <when input="output_format" value="tsv" format="tsv" />
                <when input="output_format" value="png" format="png" />
                <when input="output_format" value="csv" format="csv" />
                <when input="output_format" value="txt" format="txt" />
                <when input="output_format" value="json" format="json" />
            </change_format>
        </data>
    </outputs>
    <tests>
    </tests>
    <help>
**What it does**

This tool fetches data from pubchem
    </help>
</tool>
