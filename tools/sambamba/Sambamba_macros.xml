<macros>

    <xml name="requirements">
        <requirements>
            <requirement type="package" version="0.5.9.0">Sambamba</requirement>
            <yield/>
        </requirements>
    </xml>

    <token name="@WRAPPER_VERSION@">0.5.9.0</token>

    <xml name="stdio">
        <stdio>
            <!-- Anything other than zero is an error -->
            <exit_code range="1:" />
            <exit_code range=":-1" />
            <!-- In case the return code has not been set propery check stderr too -->
            <regex match="Error:" />
            <regex match="Exception:" />
        </stdio>
    </xml>

    <token name="@EXECUTABLE">
    <![CDATA[
        $__tool_directory__/sambamba
    ]]>        
    </token>

    <xml name="inputSetup1">
        <param name="input_file1" type="data" format="bam" label="Input file 1" />
    </xml>

    <xml name="inputSetup2">
        <param name="input_file2" type="data" format="bam" label="Input file 2" />
    </xml>

    <xml name="depthParameters">
        <param name="F" type="text" optional="true" label="Keep only reads that satisfy FILTER" />
        <param name="c" type="integer" value= "0" label="Minimum mean coverage for output"/>
        <param name="C" type="integer" value= "0" label="Maximum mean coverage for output"/>
        <param name="q" type="integer" value= "0" label="Don't count bases with lower base quality"/>
        <param name="combined" type="boolean" truevalue="-combined" falsevalue="" checked="false" label="Output combined statistics for all samples"/>
        <param name="a" type="boolean" truevalue="-a" falsevalue="" checked="false" label="Add additional column of y/n instead of  skipping records not satisfying the criteria"/>
        <param name="L" type="text" optional="true" label="Region of interest in form chr:beg-end" />
    </xml>

    <token name="@REFERENCES@">
<![CDATA[
Sambamba exploits multi-core processing and dramatically reduces processing time. Sambamba is being adopted at sequencing centers, not only because of its speed, but also because of additional functionality, including coverage analysis and powerful filtering capability.
]]>
    </token>

    <xml name="citations">
        <citations>
            <citation type="doi">10.1093/bioinformatics/btv098</citation>
            <yield />
        </citations>
    </xml>

</macros>    
