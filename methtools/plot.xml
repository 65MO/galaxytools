<tool id="methtools_plot" name="Plotting" version="0.1.1">
    <description>of methylated regions</description>
    <requirements>
        <requirement type="package" version="0.1_602edc990c6a36e2930f88f3ae5585430164d643">methtools</requirement>
    </requirements>
    <command>
        #import tempfile, os
        #set $temp_dir = os.path.abspath(tempfile.mkdtemp())
        cd $temp_dir;

        plot.py
        --processors 4
        --coordinatefile $coordinatefile
        --bed
        -i $infile_control $infile_affected
        $compressed
        ;

        cp all_merged.txt $bed_outfile;
        cp all_merged.png $png_outfile;
        #if str($compressed) == "":
            tar -czf $compressed_outfile *;
        #end if

        ##clean temporary directory
        ##rm $temp_dir -rf
    </command>
    <inputs>
        <param name="infile_control" type="data" format="bed,interval" label="BED file from control sample" help="" />
        <param name="infile_affected" type="data" format="bed,interval" label="BED file from affected sample" help="" />
        <param name="coordinatefile" type="data" format="bed,interval" label="BED file with methylated regions" help="" />
        <param name="compressed" type="boolean" truevalue="" falsevalue="--overlay-only" checked="True" label="Output all single images in a compressed archive." help="" />
    </inputs>
    <outputs>
        <data format="interval" name="bed_outfile" label="${tool.name} on ${on_string}: all plotted regions" />
        <data format="png" name="png_outfile" label="${tool.name} on ${on_string}: overlay image" />
        <data format="tar.gz" name="compressed_outfile" label="${tool.name} on ${on_string}: archive">
            <filter>compressed == True</filter>
        </data>
    </outputs>
    <tests>
    </tests>

    <help>

**What it does**

Plots the methylation of the control and affected file for specific regions.


The regions needs to be in BED format and can be generated through the 'Find differentially methylated region (DMR)' tool.

  </help>
</tool>
