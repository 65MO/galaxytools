<tool id="methtools_plot" name="Plotting" version="0.1.1">
    <description>of methylated regions</description>
    <requirements>
        <requirement type="package" version="0.1_602edc990c6a36e2930f88f3ae5585430164d643">methtools</requirement>
    </requirements>
    <command>
        #import tempfile, os
        #set $temp_dir = os.path.abspath(tempfile.mkdtemp())
        #os.chdir( $temp_dir )

        plot
        --processors 4
        --coordinatefile $coordinatefile
        -i $infile_control $infile_affected
        $overlay_only
        
        ;
        #if $overlay_only == '--overlay-only':
            #cp ./merged.txt $bed_outfile
            #cp ./merged.svg $svg_outfile
        #else:
            #tar -czf $compressed_outfile $temp_dir
        #end if

        ##clean tempdir
        #rm $temp_dir -rf
    </command>
    <inputs>
        <param name="infile_control" type="data" format="bed" label="BED file from control sample" help="" />
        <param name="infile_affected" type="data" format="bed" label="BED file from affected sample" help="" />
        <param name="coordinatefile" type="data" format="bed" label="BED file with methylated regions" help="" />

        <param name="overlay_only" type="boolean" truevalue="--overlay-only" falsevalue="" checked="True" label="only create the overlay image" help="" />

    </inputs>
    <outputs>
        <data format="bed" name="bed_outfile" label="${tool.name} on ${on_string}: all plotted regions">
            <filter>overlay_only == "--overlay-only"</filter>
        </data>
        <data format="svg" name="svg_outfile" label="${tool.name} on ${on_string}: overlay image">
            <filter>overlay_only == "--overlay-only"</filter>
        </data>
        <data format="gzipped" name="compressed_outfile" label="${tool.name} on ${on_string}: archive">
            <filter>overlay_only == ""</filter>
        </data>
    </outputs>
    <tests>
    </tests>

    <help>

**What it does**

Extract differential methylated regions.

  </help>
</tool>
