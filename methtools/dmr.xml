<tool id="methtools_dmr" name="Find differentially methylated region (DMR)" version="0.1.1">
    <description></description>
    <requirements>
        <requirement type="package" version="0.1_602edc990c6a36e2930f88f3ae5585430164d643">methtools</requirement>
    </requirements>
    <command>
        dmr
        --control $infile_control
        --affected $infile_affected
        --o $outfile

        $fisher

        #if $min_cov != 0:
            --min-coverage $min_cov
        #end if
        #if $max_cov != 0:
            --max-coverage $max_cov
        #end if
        #if $quantil != 0:
            --filter-quantil $quantil
        #end if

        --min-window-length $min_window_length
        --min-delta-methylation $min_delta_methylation
        --check-last-n $check_last_n
        #if $allow_failed != -1:
            --allow-failed $allow_failed
        #end if
        #if $allow_failed != -1:
            --max-cpg-distance $max_cpg_distance
        #end if

    </command>
    <inputs>
        <param name="infile_control" type="data" format="bed" label="BED file from control sample" help="" />
        <param name="infile_affected" type="data" format="bed" label="BED file from affected sample" help="" />

        <param name="min_cov" type="integer" value="0" label="Minimal allowed coverage" help="0 means no filtering at all" />
        <param name="max_cov" type="integer" value="50" label="Maximal allowed coverage" help="0 means no filtering at all" />
        <param name="quantil" type="float" value="0" label="Filter all site with a greater coverage than the specified quantil (e.g. 0.999)" help="0 means no filtering at all" />

        <param name="fisher" type="boolean" truevalue="--fisher" falsevalue="" checked="False" label="print the fisher-exact-test pvalue for each calculated windoe" help="" />

        <param name="min_window_length" type="integer" value="4" label="minimal window length" />
        <param name="min_delta_methylation" type="integer" value="25" label="minimal delta between the two mehylation states" />
        <param name="check_last_n" type="integer" value="4" label="check last N CpG sites if they fullfill all constraints" />
        <param name="allow_failed" type="integer" value="-1" label="how many sites are allowed to fail in a row" help="-1 means no check at all" />
        <param name="max_cpg_distance" type="integer" value="-1" label="maximal CpG distance" help="-1 means no check at all"/>

    </inputs>
    <outputs>
        <data format="bed" name="outfile" label="${tool.name} on ${on_string}: tiling regions" />
    </outputs>
    <tests>
    </tests>

    <help>

**What it does**

Extract differential methylated regions.

  </help>
</tool>
