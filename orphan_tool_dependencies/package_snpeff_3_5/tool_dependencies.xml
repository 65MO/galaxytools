<?xml version="1.0"?>
<tool_dependency>
    <package name="snpEff" version="3.5">
        <install version="1.0">
            <actions>
                <action type="download_by_url">https://downloads.sourceforge.net/project/snpeff/snpEff_v3_5_core.zip</action>
                <action type="move_directory_files">
                    <source_directory>.</source_directory>
                    <destination_directory>$INSTALL_DIR</destination_directory>
                </action>
                <action type="set_environment">
                    <environment_variable name="SNPEFF_JAR_PATH" action="set_to">$INSTALL_DIR</environment_variable>
                </action>
                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/scripts</environment_variable>
                </action>
            </actions>
        </install>
        <readme>
SnpEff and SnpSift ( http://snpeff.sourceforge.net/ )

SnpEff is a variant annotation and effect prediction tool by Pablo Cingolani.
It annotates and predicts the effects of variants on genes (such as amino acid changes).

This repository contains a tool_dependencies.xml file that downloads and installs SnpEff and SnpSift (SnpEff.jar and SnpSift.jar)

The install creates an environment variable: SNPEFF_JAR_PATH that contains the path to the jar files. Tools using this can generate a command line:
java -Xmx6G -jar \$SNPEFF_JAR_PATH/snpEff.jar eff -c \$SNPEFF_JAR_PATH/snpEff.config ...

The snpEff.config file is also installed, which specifies the default location for installed SnpEff genome databases:
data_dir = ~/snpEff/data/

The location of a genome database can be set via the commandline option -dataDir. Tools using this can generate a command line:
java -Xmx6G -jar \$SNPEFF_JAR_PATH/snpEff.jar eff -c \$SNPEFF_JAR_PATH/snpEff.config -dataDir path_to_data_directory snpeff_database_name input.vcf

Another way to change the location of data_dir would be to create a symbolic link in the galaxy HOME directory:
ln -s genome_data_path/snpEff ~/snpEff

SnpEff citation: |Cingolani2012program|_.

.. |Cingolani2012program| replace:: Cingolani, P., Platts, A., Wang, L. L., Coon, M., Nguyen, T., Wang, L., Land, S. J., Lu, X., Ruden, D. M. (2012) A program for annotating and predicting the effects of single nucleotide polymorphisms, SnpEff: SNPs in the genome of *Drosophila melanogaster* strain w1118; iso-2; iso-3. *Fly* 6(2):80-92
.. _Cingolani2012program: https://www.landesbioscience.com/journals/fly/article/19695/

SnpSift citation: |Cingolani2012using|_.
.. |Cingolani2012using| replace:: Cingolani, P., Patel, V. M., Coon, M., Nguyen, T., Land, S. J., Ruden, D. M., Lu, X. (2012) Using *Drosophila melanogaster* as a model for genotoxic chemical mutational studies with a new program, SnpSift. *Front. Genet.* 3:35
.. _Cingolani2012using: http://journal.frontiersin.org/Journal/10.3389/fgene.2012.00035/
        </readme>
    </package>
</tool_dependency>

