<tool_dependency>
    <package name="openbabel" version="2.3.2">
        <install version="1.0">
            <actions>
                <action type="download_by_url">http://downloads.sourceforge.net/project/openbabel/openbabel/2.3.2/openbabel-2.3.2.tar.gz</action>
                <!--
                    Huge hack, to point to the actual python lib path. Cmake gets confused with mixed python versions (2.x and 3.x) and we need to point explicitely to the recent version.
                -->
                <action type="shell_command">cmake . -DPYTHON_BINDINGS=ON -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR -DPYTHON_LIBRARY=`python -c 'import sys; print "%s/lib/python%s.%s/config/libpython%s.%s.so" % (sys.exec_prefix, sys.version_info.major, sys.version_info.minor, sys.version_info.major, sys.version_info.minor)'`</action>
                <action type="shell_command">make</action>
                <action type="shell_command">make install</action>
                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/bin</environment_variable>
                </action>
                <action type="set_environment">
                    <environment_variable name="PYTHONPATH" action="prepend_to">$INSTALL_DIR/lib/</environment_variable>
                </action>
                <action type="set_environment">
                    <environment_variable name="BABEL_DATADIR" action="set_to">$INSTALL_DIR/share/openbabel</environment_variable>
                </action>
                <action type="set_environment">
                    <environment_variable name="BABEL_LIBDIR" action="set_to">$INSTALL_DIR/lib/openbabel/2.3.2</environment_variable>
                </action>
            </actions>
        </install>
        <readme>Compiling OpenBabel requires g++ and CMake 2.4+. Optional but required for a few features is Eigen version 2 or newer and the cairo development libraries.</readme>
    </package>
</tool_dependency>
