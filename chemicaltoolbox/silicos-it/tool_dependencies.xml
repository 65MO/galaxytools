<tool_dependency>
    <package name="silicos_it" version="1.0.0">
        <install version="1.0">
            <actions>
                <!--compiling openbabel 2.3.2 -->
                <action type="download_by_url">http://downloads.sourceforge.net/project/openbabel/openbabel/2.3.2/openbabel-2.3.2.tar.gz</action>
                <action type="shell_command">cmake . -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR/openbabel/build &amp;&amp; make &amp;&amp; make install</action>

                <!--compiling strip-it -->
                <action type="shell_command">wget http://www.silicos-it.com/_php/download.php?file=strip-it-1.0.1.tar.gz</action>
                <action type="shell_command">tar xfvz download.php?file=strip-it-1.0.1.tar.gz &amp;&amp; 
                    cd strip-it-1.0.1 &amp;&amp;
                    cmake . -DOPENBABEL2_INCLUDE_DIRS=$INSTALL_DIR/openbabel/build/include/openbabel-2.0/ -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR/strip-it/ -DOPENBABEL2_LIBRARIES=$INSTALL_DIR/openbabel/build/lib/libopenbabel.so &amp;&amp; 
                    make  &amp;&amp; 
                    make install</action>
                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/strip-it/bin</environment_variable>
                </action>

                <!-- compiling align-it -->
                <action type="shell_command">wget http://www.silicos-it.com/_php/download.php?file=align-it-1.0.3.tar.gz</action>
                <action type="shell_command">tar xfvz download.php?file=align-it-1.0.3.tar.gz &amp;&amp; 
                    cd align-it-1.0.3 &amp;&amp; 
                    cmake . -DOPENBABEL2_INCLUDE_DIRS=$INSTALL_DIR/openbabel/build/include/openbabel-2.0/ -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR/align-it/ -DOPENBABEL2_LIBRARIES=$INSTALL_DIR/openbabel/build/lib/libopenbabel.so &amp;&amp; 
                    make &amp;&amp; 
                    make install</action>
                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/align-it/bin</environment_variable>
                </action>

                <!-- compiling shape-it -->
                <action type="shell_command">wget http://www.silicos-it.com/_php/download.php?file=shape-it-1.0.1.tar.gz</action>
                <action type="shell_command">tar xfvz download.php?file=shape-it-1.0.1.tar.gz &amp;&amp; 
                    cd shape-it-1.0.1 &amp;&amp; 
                    cmake . -DOPENBABEL2_INCLUDE_DIRS=$INSTALL_DIR/openbabel/build/include/openbabel-2.0/ -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR/shape-it/ -DOPENBABEL2_LIBRARIES=$INSTALL_DIR/openbabel/build/lib/libopenbabel.so &amp;&amp; 
                    make &amp;&amp; 
                    make install</action>
                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/shape-it/bin</environment_variable>
                </action>

                <!-- RDKit with boost, required for QED -->
                <!-- try to set the right architecture with uname -m -->
                <action type="shell_command">wget http://downloads.sourceforge.net/project/boost/boost/1.53.0/boost_1_53_0.tar.bz2</action>
                <action type="shell_command">tar xfvj boost_1_53_0.tar.bz2 &amp;&amp; 
                    cd boost_1_53_0 &amp;&amp;
                    ./bootstrap.sh --with-libraries=python,regex &amp;&amp; 
                    if [ $(uname -m) == 'x86_64' ]; then ./bjam install --prefix=$INSTALL_DIR/boost/; else ./bjam address-model=64 cflags=-fPIC cxxflags=-fPIC install --prefix=$INSTALL_DIR/boost/; fi;</action>
                <!-- QED -->
                <action type="shell_command">wget http://downloads.sourceforge.net/project/rdkit/rdkit/Q4_2012/RDKit_2012_12_1.tgz</action>
                <action type="shell_command">tar xfvz RDKit_2012_12_1.tgz</action>

                <action type="shell_command">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:`pwd`/RDKit_2012_12_1/lib/ &amp;&amp;
                    export PYTHONPATH=$PYTHONPATH:`pwd`/ &amp;&amp;
                    cd RDKit_2012_12_1 &amp;&amp;
                    mkdir build &amp;&amp;
                    cd build &amp;&amp;
                    cmake .. -DBOOST_ROOT=$INSTALL_DIR/boost/ -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR/rdkit/ -DRDK_INSTALL_INTREE=OFF</action>
                    <action type="shell_command">cd RDKit_2012_12_1/build &amp;&amp; make </action>
                    <action type="shell_command">cd RDKit_2012_12_1/build &amp;&amp; make install</action>

                <action type="set_environment">
                    <environment_variable name="PATH" action="prepend_to">$INSTALL_DIR/rdkit/bin</environment_variable>
                    <environment_variable name="PYTHONPATH" action="prepend_to">$INSTALL_DIR/rdkit/lib/</environment_variable>
                    <environment_variable name="LD_LIBRARY_PATH" action="prepend_to">$INSTALL_DIR/boost/lib/</environment_variable>
                </action>

            </actions>
        </install>
        <readme>Compiling OpenBabel requires g++ and CMake 2.4+. Optional but required for a few features is Eigen version 2 or newer and the cairo development libraries.</readme>
    </package>
</tool_dependency>
